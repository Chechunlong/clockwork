# test the execution of subcondition predicates

Test MACHINE {

	Done WHEN b>3, 
		EXECUTE timeout WHEN TIMER>2000, 
		EXECUTE error WHEN TIMER>4000;
	Error WHEN b==1;

	ENTER INIT { 
		b := 2; 
		LOG "Test." ;
		LOG "Initialisation complete." 
	}
	COMMAND inc { b := b + 1 }

	COMMAND timeout { 
		LOG "timeout detected"; 
		LOG "second leg message" ;
	}

	COMMAND error {
		LOG "extra timeout detected.. recovering";
		b := 1;
	}
	OPTION tab Test;
}

test Test;
